!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?e(Object(a),!0).forEach(function(e){n(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function n(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,r,a,i){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return o(u,"_invoke",function(n,r,a){var i,o,s,l=0,u=a||[],h=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,o=0,s=e,d.n=n,c}};function f(n,r){for(o=n,s=r,t=0;!h&&l&&!a&&t<u.length;t++){var a,i=u[t],f=d.p,p=i[2];n>3?(a=p===r)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(o=0,d.v=r,d.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,d.n=p,o=0))}if(a||n>1)return c;throw h=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(h&&1===u&&f(u,p),o=u,s=p;(t=o<2?e:s)||!h;){i||(o?o<3?(o>1&&(d.n=-1),f(o,s)):d.n=s:d.v=s);try{if(l=2,i){if(o||(a="next"),t=i[a]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,o<2&&(o=0)}else 1===o&&(t=i.return)&&t.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=e}else if((t=(h=d.n<0)?s:n.call(r,d))!==c)break}catch(t){i=e,o=1,s=t}finally{l=1}}return{value:t,done:h}}}(n,a,i),!0),u}var c={};function l(){}function u(){}function h(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),f=h.prototype=l.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,o(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=h,o(f,"constructor",h),o(h,"constructor",u),u.displayName="GeneratorFunction",o(h,a,"GeneratorFunction"),o(f),o(f,a,"Generator"),o(f,r,function(){return this}),o(f,"toString",function(){return"[object Generator]"}),(i=function(){return{w:s,m:p}})()}function o(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,n,r){function i(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},o(e,t,n,r)}function s(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,c,"next",e)}function c(e){s(i,r,a,o,c,"throw",e)}o(void 0)})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./three-legacy-VuR7Qgm-.js","./gsap-legacy-BnzCqiyA.js"],function(e,o){"use strict";var s,u,d,f,p,m,y,g,v,w,b,x,k,_,E,S,L,C,P,O,j,D,Y,B,M,A,I,T,G,R,z,V,K,X,U,F,N,H,W;return{setters:[function(e){s=e.B,u=e.V,d=e.M,f=e.S,p=e.C,m=e.P,y=e.a,g=e.W,v=e.b,w=e.c,b=e.A,x=e.O,k=e.d,_=e.e,E=e.f,S=e.g,L=e.R,C=e.T,P=e.h,O=e.G,j=e.i,D=e.j,Y=e.k,B=e.l,M=e.D,A=e.m,I=e.n,T=e.o,G=e.p,R=e.q,z=e.r,V=e.s,K=e.t,X=e.u,U=e.E,F=e.I,N=e.v,H=e.w},function(e){W=e.g}],execute:function(){var e=document.createElement("style");e.textContent="@font-face{font-family:Nunito Sans;font-style:normal;font-weight:400;font-display:swap;src:url("+new URL("../fonts/nunito-sans-v18-cyrillic_latin-regular.woff2",o.meta.url).href+') format("woff2")}@font-face{font-family:Nunito Sans;font-style:normal;font-weight:800;font-display:swap;src:url('+new URL("../fonts/nunito-sans-v18-cyrillic_latin-800.woff2",o.meta.url).href+') format("woff2")}@font-face{font-family:blackberry;font-style:normal;font-weight:400;font-display:swap;src:url('+new URL("../fonts/blackberry.woff2",o.meta.url).href+') format("woff2")}:root{--safe-top: env(safe-area-inset-top, 0px);--safe-right: env(safe-area-inset-right, 0px);--safe-bottom: env(safe-area-inset-bottom, 0px);--safe-left: env(safe-area-inset-left, 0px);--color-blue: #009AA9;--color-blue-grad: linear-gradient(1deg, rgba(0, 154, 169, 1) 1%, rgba(122, 202, 214, 1) 100%);--color-yellow-grad: linear-gradient(1deg, rgba(254, 144, 0, 1) 1%, rgba(247, 197, 131, 1) 100%);--color-green-grad: linear-gradient(1deg, rgba(78, 175, 5, 1) 1%, rgba(149, 224, 128, 1) 100%)}*{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none;touch-action:manipulation;box-sizing:border-box}.lang-toggle img,.scroll-progress__bar{pointer-events:auto}@media (hover: none){*{cursor:default!important}}html,body{width:100%;height:100%;margin:0;padding:0;overflow:hidden;overscroll-behavior:none;background:#1c1d21;font-family:Nunito Sans,Tahoma,sans-serif}body{position:fixed;top:0;right:0;bottom:0;left:0}canvas{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:-1;object-fit:cover;outline:none;touch-action:none!important}.screen.active{opacity:1;visibility:visible}.screen{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100dvh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(0,0,0,.8);overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s;scrollbar-width:none;-ms-overflow-style:none}.screen::-webkit-scrollbar{display:none;width:0;height:0}.main_screen h1{font-family:blackberry,Tahoma,cursive;font-size:clamp(2.5rem,10vw + 2vh,11.25rem);line-height:.85;text-align:center;color:#f76951;letter-spacing:-.02em;max-width:95vw;margin:max(.5rem,var(--safe-top) * .5) auto clamp(1rem,4vh,3rem);text-shadow:.04em .04em .02em rgba(255,255,255,.9),-.03em -.03em .02em rgba(255,255,255,.9);word-wrap:break-word}.main_screen_btns_wrap{display:flex;flex-direction:column;align-items:center;width:100%}.new_game_btn{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:370px;height:75px;margin-bottom:18px;border:2px solid #6f727d;border-radius:15px;background:var(--color-blue);font-size:22px;font-weight:800;text-transform:uppercase;cursor:pointer;transition:transform .3s ease,box-shadow .3s ease;position:relative}.new_game_btn:hover{transform:translateY(-2px)}.new_game_btn:active{transform:translateY(0);box-shadow:none}.blue_btn{background:var(--color-blue-grad);border:1px solid #007d8c;box-shadow:0 4px #007d8c}.yellow_btn{background:var(--color-yellow-grad);border:1px solid #d96a02;box-shadow:0 4px #d96a02}.green_btn{background:var(--color-green-grad);border:1px solid #3d8903;box-shadow:0 4px #3d8903}.arrow_back{position:absolute;left:-19px;top:21px;width:5px;height:5px;border:8px solid white;border-color:white white transparent transparent;transform:rotate(-135deg)}.arrow_back:before,.arrow_back:after{content:"";display:block;position:absolute;width:0;height:0;border:5px solid}.arrow_back:before{border-color:white transparent transparent white;top:-1px;right:0;transform:rotate(45deg);transform-origin:top right}.arrow_back:after{border-color:transparent white white transparent;top:0;right:-1px;transform:rotate(-45deg);transform-origin:top right}.huds{display:flex;flex-direction:row-reverse;position:fixed;top:20px;right:20px;z-index:10}.huds{position:fixed;top:max(20px,calc(var(--safe-top) + 10px));right:max(20px,calc(var(--safe-right) + 10px));z-index:10}.hud{margin-left:5px;z-index:10;pointer-events:none}.hud--outline{padding:3px 10px 6px;border-radius:10px;border:1px solid rgba(255,255,255,.6);background:rgba(0,0,0,.12);backdrop-filter:blur(4px)}.menu_in_game{display:flex;align-items:flex-start;align-self:flex-start;padding:5px;border-radius:10px;border:1px solid rgba(255,255,255,.4)}.pause_btn_wrap,.sound_btn_wrap{display:flex;justify-content:center;align-items:center;padding:5px 10px;border-radius:6px;margin:5px;cursor:pointer;pointer-events:auto}.pause_btn_wrap{height:100%;background:var(--color-green-grad);border:1px solid #3d8903;box-shadow:0 4px #3d8903}.sound_btn_wrap{background:var(--color-blue-grad);border:1px solid #007d8c;box-shadow:0 4px #007d8c}#nav-icon3{width:30px;height:30px;position:relative;transform:rotate(0);transition:.5s ease-in-out;cursor:pointer}#nav-icon3 span{display:block;position:absolute;height:5px;width:100%;background:#fff;border-radius:9px;opacity:1;left:0;transform:rotate(0);transition:.25s ease-in-out}#nav-icon3 span:nth-child(1){top:3px}#nav-icon3 span:nth-child(2){top:13px}#nav-icon3 span:nth-child(3){top:23px}#nav-icon3.open span:nth-child(1){top:18px;width:0%;left:50%}#nav-icon3.open span:nth-child(2){transform:rotate(45deg)}#nav-icon3.open span:nth-child(3){transform:rotate(-45deg)}#nav-icon3.open span:nth-child(4){top:18px;width:0%;left:50%}.volume-icon{position:relative;width:30px;height:30px}.volume-icon__input{display:none}.volume-icon__input+svg{display:block;fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:9px;width:100%;height:100%}.volume-icon__input+svg path{animation:var(--name) .5s ease forwards}.volume-icon__input+svg path:nth-child(1){--name: shape-r}.volume-icon__input+svg path:nth-child(2){--name: small-r;stroke-dashoffset:1px}.volume-icon__input+svg path:nth-child(3){--name: large-r;stroke-dashoffset:1px}.volume-icon__input.volume_off+svg path:nth-child(1){--name: shape}.volume-icon__input.volume_off+svg path:nth-child(2){--name: small}.volume-icon__input.volume_off+svg path:nth-child(3){--name: large}.scroll-progress{position:fixed;top:8px;right:3px;bottom:8px;width:4px;border-radius:4px;background:rgba(255,255,255,.18);pointer-events:none;z-index:1000;opacity:0;transition:opacity .25s ease}.scroll-progress.visible{opacity:1}.scroll-progress__bar{position:absolute;left:0;width:100%;border-radius:4px;background:rgba(255,255,255,.75);cursor:grab;touch-action:none}.scroll-progress__bar:active{cursor:grabbing}.loader_screen .surface{position:absolute;left:50%;transform:translate(-50%,-50%);background-color:#fff;width:8rem;height:.7rem;border-radius:1rem;animation:surface-animation .5s linear infinite}.loader_screen .surface>.loader_line{position:absolute;height:100%;width:0%;background:linear-gradient(90deg,#4dffa3,#00c44b);border-radius:999px;box-shadow:0 0 10px rgba(0,255,180,.8);transition:width .8s ease-in-out}.loader_screen .surface span{font-size:26px;padding-top:14px;position:absolute;color:#fff;font-weight:700}.lang-toggle{position:fixed;bottom:20px;left:20px;width:70px;height:38px;background-color:rgba(255,255,255,.25);border-radius:20px;padding:4px;cursor:pointer;z-index:1001}.lang-toggle img{position:absolute;top:4px;width:30px;height:30px;border-radius:50%;object-fit:cover;transition:all .2s ease-in-out}.lang-toggle img.ru{left:4px}.lang-toggle img.us{left:34px;transform:rotate(360deg)}.debug_error_overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:10000;background:rgba(0,0,0,.8);color:#ff8080;font-family:monospace;font-size:14px;padding:20px;white-space:pre-wrap;overflow:auto;pointer-events:auto}@keyframes small{0%,30%{stroke-dasharray:0 0 30px 64px}40%{stroke-dashoffset:16px}80%,to{stroke-dashoffset:1px}70%{stroke-dasharray:0 43px 30px 64px}to{stroke-dasharray:0 39px 30px 64px}}@keyframes small-r{0%{stroke-dasharray:0 39px 30px 64px;stroke-dashoffset:1px}70%{stroke-dashoffset:16px}70%,to{stroke-dasharray:0 0 30px 64px}}@keyframes large{0%,30%{stroke-dasharray:0 0 50px 84px}40%{stroke-dashoffset:16px}80%,to{stroke-dashoffset:1px}70%{stroke-dasharray:0 82px 32px 84px}to{stroke-dasharray:0 78px 32px 84px}}@keyframes large-r{0%{stroke-dasharray:0 78px 32px 84px;stroke-dashoffset:1px}70%{stroke-dashoffset:16px}70%,to{stroke-dasharray:0 0 50px 84px}}@keyframes shape{0%{stroke-dasharray:60px 0 184px;stroke-dashoffset:0}70%{stroke-dasharray:63px 51px 184px;stroke-dashoffset:21px}to{stroke-dasharray:59px 47px 184px;stroke-dashoffset:17px}}@keyframes shape-r{0%{stroke-dasharray:59px 47px 184px;stroke-dashoffset:17px}to{stroke-dasharray:60px 0 184px;stroke-dashoffset:0}}@keyframes surface-animation{0%{transform:translate(-50%) rotate(0)}to{transform:translate(-50%) rotate(0)}}@media (max-height: 600px){.main_screen{justify-content:flex-start;padding-top:10px}.main_screen h1{font-size:clamp(1.8rem,8vw + 1vh,3.5rem)}}@media (min-height: 900px){.main_screen h1{margin-top:max(1rem,var(--safe-top) * .7)}}@media screen and (max-device-width: 1024px){body{text-size-adjust:none}.lang-toggle{bottom:10px;left:10px}}\n/*$vite$:1*/',document.head.appendChild(e);var q=function(){return h(function e(t){l(this,e),this.startGameCallback=t,this.ysdk=null,this._setupGlobalErrorListeners()},[{key:"init",value:function(){var e=this;"complete"===document.readyState?this._initYaGames():window.addEventListener("load",function(){e._initYaGames()})}},{key:"showFullscreenAdv",value:function(){this.ysdk&&this.ysdk.adv.showFullscreenAdv({callbacks:{onClose:function(e){},onError:function(e){}}})}},{key:"showRewardedVideo",value:function(e){this.ysdk&&this.ysdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e.onOpen&&e.onOpen()},onRewarded:function(){e.onRewarded&&e.onRewarded()},onClose:function(){e.onClose&&e.onClose()},onError:function(t){console.error("Reward error:",t),e.onError&&e.onError(t)}}})}},{key:"_initYaGames",value:function(){var e=this;"undefined"!=typeof YaGames?YaGames.init().then(function(t){console.log("YaGames SDK initialized"),e.ysdk=t,window.ysdk=t,e.startGameCallback&&e.startGameCallback(t)}).catch(function(t){e.showInitError(t)}):(console.warn("YaGames is not defined (running in offline/dev mode?)"),this.startGameCallback&&this.startGameCallback(null))}},{key:"showInitError",value:function(e){var t=this,n="Init error";e&&(e.message?n+=": "+e.message:n+=": "+String(e)),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){t._renderInitError(n)},{once:!0}):this._renderInitError(n)}},{key:"_renderInitError",value:function(e){var t=document.body||document.documentElement;if(t){var n=document.getElementById("debug-error-overlay");n||((n=document.createElement("div")).id="debug-error-overlay",n.className="debug_error_overlay",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.background="rgba(0,0,0,0.85)",n.style.color="red",n.style.zIndex="9999",n.style.padding="20px",n.style.whiteSpace="pre-wrap",n.style.fontFamily="monospace",t.appendChild(n)),n.textContent=e}}},{key:"_setupGlobalErrorListeners",value:function(){var e=this;window.addEventListener("error",function(t){if(t){var n=[];t.message&&n.push(t.message),t.filename&&n.push("at "+t.filename+":"+t.lineno+":"+t.colno),t.error&&t.error.stack&&n.push(t.error.stack),e.showInitError(n.join("\n"))}}),window.addEventListener("unhandledrejection",function(t){if(t){var n=t.reason||"unhandledrejection";n.stack?e.showInitError(n.stack):e.showInitError(String(n))}})}}])}();function Z(e,t){return Math.random()*(t-e)+e}function $(){return J.apply(this,arguments)}function J(){return(J=c(i().m(function e(){var t;return i().w(function(e){for(;;)switch(e.n){case 0:document.addEventListener("contextmenu",function(e){return e.preventDefault(),!1},{capture:!0}),document.addEventListener("selectstart",function(e){return e.preventDefault(),!1},{capture:!0}),document.addEventListener("dragstart",function(e){return e.preventDefault(),!1},{capture:!0}),document.addEventListener("touchstart",function(e){e.touches.length>1&&e.preventDefault()},{passive:!1}),document.addEventListener("touchstart",function(e){t=setTimeout(function(){e.preventDefault()},500)},{passive:!1}),document.addEventListener("touchend",function(){clearTimeout(t)}),document.addEventListener("touchmove",function(){clearTimeout(t)}),document.addEventListener("dblclick",function(e){return e.preventDefault(),!1},{capture:!0}),(navigator.userAgent.includes("YaBrowser")||navigator.userAgent.includes("Yandex"))&&document.addEventListener("touchstart",function(e){e.target.closest(".new_game_btn, .free_game_btn, .popup_game_btn, .popup_game_btn_close, .level_game_chels, .level_game_chels_contest, .free_game_chels, .contest_game_btn, .arrow_back, .levels_block, .sound_btn_wrap, .pause_btn_wrap, .lang-toggle, .auth_btn, .small_btn")||e.preventDefault()},{passive:!1});case 1:return e.a(2)}},e)}))).apply(this,arguments)}new s(new u(-.5,-.5,-.5),new u(.5,.5,.5)),new d;var Q=function(){return h(function e(){l(this,e),this.events={}},[{key:"on",value:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}))}},{key:"emit",value:function(e,t){this.events[e]&&this.events[e].forEach(function(e){return e(t)})}}])}(),ee=function(){return h(function e(t){var n;l(this,e),this.gameContext=t,this.onWindowResize=this.onWindowResize.bind(this),this.setVhVar=this.setVhVar.bind(this),this.onVisibilitychange=this.onVisibilitychange.bind(this),this.scene=new f,this.scene.background=new p(10392058),this.camera=new m(25,window.innerWidth/window.innerHeight,.1,2e3),this.camera.position.x=-5,this.camera.position.y=12,this.camera.position.z=32;var r=k.degToRad(25);this.FIXED_HFOV=2*Math.atan(Math.tan(r/2)*(16/9)),this.stats=new y,document.body.appendChild(this.stats.dom),this.stats.dom.style.top="0",this.stats.dom.style.left="0",this.renderer=new g({antialias:!0}),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=v,this.renderer.outputColorSpace=w,this.renderer.toneMapping=b,this.renderer.toneMappingExposure=1.05,this.controls=new x(this.camera,this.renderer.domElement),this.setVhVar(),window.addEventListener("resize",this.setVhVar),window.addEventListener("orientationchange",this.setVhVar),null===(n=window.visualViewport)||void 0===n||n.addEventListener("resize",this.setVhVar),window.addEventListener("resize",this.onWindowResize),window.addEventListener("visibilitychange",this.onVisibilitychange),this.onWindowResize(),this.onVisibilitychange()},[{key:"setVhVar",value:function(){var e,t=.01*((null===(e=window.visualViewport)||void 0===e?void 0:e.height)||window.innerHeight);document.documentElement.style.setProperty("--vh","".concat(t,"px"))}},{key:"onVisibilitychange",value:function(){this.gameContext.audioClass}},{key:"onWindowResize",value:function(){var e=document.body.offsetWidth,t=document.body.offsetHeight,n=e/t,r=2*Math.atan(Math.tan(this.FIXED_HFOV/2)/n),a=k.degToRad(4),i=k.degToRad(90);r=k.clamp(r,a,i),this.camera.fov=k.radToDeg(r),this.camera.aspect=n,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}}])}(),te=function(){return h(function e(){l(this,e),this.gameInit=!1,this.isMobileDevice=this.detectDevice(),this.gameState={menu:1,play:2,pause:3},this.currentGameState=this.gameState.menu},[{key:"setGameState",value:function(e){this.currentGameState=e}},{key:"goToMenu",value:function(){this.setGameState(this.gameState.menu)}},{key:"startGame",value:function(){this.setGameState(this.gameState.play)}},{key:"pauseGame",value:function(){this.setGameState(this.gameState.pause)}},{key:"resumeGame",value:function(){this.setGameState(this.gameState.play)}},{key:"detectDevice",value:function(){var e=window.matchMedia||window.msMatchMedia;return!!e&&e("(pointer:coarse)").matches}},{key:"initCustomScroll",value:function(){var e=[".free_game_screen",".levels_game_screen",".levels_game_screen_contest",".main_screen"],t=null,n=null,r=null,a=!1,i=0,o=0,s=function(){var a=function(){for(var t=0,n=e;t<n.length;t++){var r=n[t],a=document.querySelector(r);if(a&&!a.classList.contains("hidden_screen"))return a}return null}();a!==t&&(t&&t.removeEventListener("scroll",c,{passive:!0}),r&&(r.removeEventListener("mousedown",l),r.removeEventListener("touchstart",l)),n=(t=a)?t.querySelector(".scroll-progress"):null,r=n?n.querySelector(".scroll-progress__bar"):null,t&&t.addEventListener("scroll",c,{passive:!0}),r&&(r.addEventListener("mousedown",l),r.addEventListener("touchstart",l)),c())},c=function(){if(t&&n&&r){var e=t.clientHeight,a=t.scrollHeight,i=t.scrollTop;if(a<=e+1)n.classList.remove("visible");else{n.classList.add("visible");var o=n.getBoundingClientRect().height,s=Math.max(e/a*o,24),c=a-e,l=c>0?i/c*(o-s):0;r.style.height="".concat(s,"px"),r.style.top="".concat(l,"px")}}},l=function(e){t&&r&&(a=!0,i=e.touches?e.touches[0].clientY:e.clientY,o=t.scrollTop,document.body.style.userSelect="none",e.preventDefault())},u=function(e){if(a&&t&&r&&n){var s=(e.touches?e.touches[0].clientY:e.clientY)-i,c=n.getBoundingClientRect().height,l=t.clientHeight,u=(t.scrollHeight-l)/Math.max(1,c-r.offsetHeight);t.scrollTop=o+s*u}},h=function(){a=!1,document.body.style.userSelect=""};window.addEventListener("resize",function(){s(),c()}),window.addEventListener("mousemove",u,{passive:!1}),window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("mouseup",h),window.addEventListener("touchend",h),new MutationObserver(function(){s()}).observe(document.body,{attributes:!0,subtree:!0,attributeFilter:["class"]}),s()}}])}(),ne=function(){return h(function e(){l(this,e),this.takeAudio,this._attached=!1,this.listener=new _,this.musicOn=!0,this.musics=[]},[{key:"hardStopAll",value:function(){this.musics.forEach(function(e){var t=e.music;try{t.stop()}catch(n){}}),this.quacks.forEach(function(e){try{e.stop()}catch(t){}}),this.thundersAudio.forEach(function(e){try{e.music.stop()}catch(t){}}),this.musicNowPlaying=[]}},{key:"toggleMute",value:function(e){e?(this.musicOn=!1,this.listener.context.suspend()):(this.musicOn=!0,this.listener.context.resume(),this.playMusic(["back"]))}},{key:"isMuted",value:function(){return"suspended"===this.listener.context.state}},{key:"attachTo",value:function(e){this._attached||(e.add(this.listener),this._attached=!0)}},{key:"loadAudio",value:(e=c(i().m(function e(){var t,n,r=this;return i().w(function(e){for(;;)switch(e.n){case 0:return t=new E,n=[{key:"takeAudio",name:"take",path:"audio/take.mp3",loop:!1,ref:200,vol:2}],e.n=1,Promise.all(n.map(function(e){return t.loadAsync(e.path).catch(function(t){return console.error("Ошибка при загрузке ".concat(e.path,":"),t),null})}));case 1:e.v.forEach(function(e,t){var a=n[t];if(e){var i=new S(r.listener);i.setBuffer(e),i.setLoop(a.loop),i.setRefDistance(a.ref),i.setVolume(a.vol),a.rate&&i.setPlaybackRate(a.rate),r[a.key]=i,r.musics.push({name:a.name,music:i})}});case 2:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})},{key:"stopMusic",value:function(e){var t=this;this.musicOn&&(0==e?this.musics.forEach(function(e,t,n){e.music.stop()}):e.forEach(function(e,n,r){t.musics.find(function(t){return t.name===e}).music.stop()}))}},{key:"pauseMusic",value:function(e){var t=this;this.musicOn&&e.forEach(function(e,n,r){t.musics.find(function(t){return t.name===e}).music.pause()})}},{key:"playMusic",value:function(e){var t=this;e.forEach(function(e,n,r){var a=t.musics.find(function(t){return t.name===e}).music;!a.isPlaying&&t.musicOn&&a.play()})}},{key:"togglePauseAll",value:function(e){var t=this;this.musicOn&&(e?(this.musicNowPlaying=[],this.musics.forEach(function(e){var n=e.music;n.isPlaying&&(n.pause(),t.musicNowPlaying.push(n))})):this.musicNowPlaying&&this.musicNowPlaying.length&&(this.musicNowPlaying.forEach(function(e){e.isPlaying||e.play()}),this.musicNowPlaying=[]))}}]);var e}(),re=function(){return h(function e(t){l(this,e),this.renderer=t.renderer,this.camera=t.camera,this.events=t.events,this.mouse=new u,this.raycaster=new L,this.onTapDown=this.onTapDown.bind(this),this.onTapUp=this.onTapUp.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)},[{key:"addKeyListeners",value:(e=c(i().m(function e(){var t;return i().w(function(e){for(;;)switch(e.n){case 0:t=this.renderer.domElement,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),t.addEventListener("mousedown",this.onKeyDown),t.addEventListener("mouseup",this.onKeyUp),t.addEventListener("touchstart",this.onTapDown,{passive:!1}),t.addEventListener("touchend",this.onTapUp);case 1:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"removedKeyListeners",value:function(){var e=this.renderer.domElement;window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),e.removeEventListener("mousedown",this.onKeyDown),e.removeEventListener("mouseup",this.onKeyUp),e.removeEventListener("touchstart",this.onTapDown),e.removeEventListener("touchend",this.onTapUp)}},{key:"onTapDown",value:function(e){var t=this.renderer.domElement.getBoundingClientRect();e=e.changedTouches[0],this.mouse.x=(e.clientX-t.left)/t.width*2-1,this.mouse.y=-(e.clientY-t.top)/t.height*2+1,this.raycaster.setFromCamera(this.mouse,this.camera)}},{key:"onTapUp",value:function(e){var t=this.renderer.domElement.getBoundingClientRect();e=e.changedTouches[0],this.mouse.x=(e.clientX-t.left)/t.width*2-1,this.mouse.y=-(e.clientY-t.top)/t.height*2+1,this.raycaster.setFromCamera(this.mouse,this.camera)}},{key:"onKeyDown",value:function(e){switch(e.code){case"KeyW":case"ArrowUp":this.events.emit("player_forward",1);break;case"KeyS":case"ArrowDown":this.events.emit("player_backward",1);break;case"KeyA":case"ArrowLeft":this.events.emit("player_left",1);break;case"KeyD":case"ArrowRight":this.events.emit("player_right",1)}}},{key:"onKeyUp",value:function(e){switch(e.code){case"KeyW":case"ArrowUp":this.events.emit("player_forward",0);break;case"KeyS":case"ArrowDown":this.events.emit("player_backward",0);break;case"KeyA":case"ArrowLeft":this.events.emit("player_left",0);break;case"KeyD":case"ArrowRight":this.events.emit("player_right",0)}}}]);var e}(),ae={ru:{ui:{langToggle:"EN"},title:"Шаблон",btn1:"Кнопка 1",settings:"Настройки",back:"Назад",start_game_btn:"Начать игру"},en:{ui:{langToggle:"RU"},title:"Template",btn1:"btn1",settings:"settings",back:"back",start_game_btn:"Start Game"}};function ie(e,t){return t.split(".").reduce(function(e,t){return e&&e[t]},e)}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ru",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=ae[e]||ae.ru;if(t.querySelectorAll("[data-i18n]").forEach(function(e){var t=e.dataset.i18n,r=ie(n,t);null!=r&&(e.textContent=r)}),document.documentElement.lang=e,localStorage.setItem("locale",e),document.getElementById("lang-toggle")){var r=document.getElementById("flag");"ru"===ie(n,"ui.langToggle")||"ru"===e?(r.classList.remove("us"),r.classList.add("ru"),r.src="images/ru.svg"):(r.classList.remove("ru"),r.classList.add("us"),r.src="images/us.svg")}}function se(e){oe(e);var t=document.getElementById("lang-toggle");document.getElementById("flag"),t&&t.addEventListener("click",function(){oe("ru"===(localStorage.getItem("locale")||"ru")?"en":"ru")})}var ce=function(){return h(function e(t){l(this,e),this.events=t.events,this.yandexPlayer={id:0,player:null,isAuthorized:!1}},[{key:"clearData",value:(r=c(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:localStorage.clear();case 1:return e.a(2)}},e)})),function(){return r.apply(this,arguments)})},{key:"initYandexPlayer",value:(n=c(i().m(function e(){var t,n,r=arguments;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=(r.length>0&&void 0!==r[0]?r[0]:{}).force,n=void 0!==t&&t,e.p=1,this.yandexPlayer.player&&!n){e.n=3;break}if("undefined"==typeof ysdk){e.n=3;break}return e.n=2,ysdk.getPlayer();case 2:this.yandexPlayer.player=e.v;case 3:if(!this.yandexPlayer.player){e.n=5;break}return e.n=4,this.yandexPlayer.player.isAuthorized();case 4:this.yandexPlayer.isAuthorized=e.v;case 5:e.n=7;break;case 6:e.p=6,e.v,this.yandexPlayer.isAuthorized=!1;case 7:this.events.emit("player_auth_checked",this.yandexPlayer.isAuthorized),this.yandexPlayer.isAuthorized&&console.log("DataClass: авторизовались");case 8:return e.a(2)}},e,this,[[1,6]])})),function(){return n.apply(this,arguments)})},{key:"loadTableFromCloud",value:(t=c(i().m(function e(){var t,n;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,this.initYandexPlayer();case 1:return e.p=1,e.n=2,this.yandexPlayer.player.getData(["table"]);case 2:if(!(t=e.v)||!t.table||"object"!==a(t.table)){e.n=3;break}this.table=t.table,e.n=4;break;case 3:return console.log("Первый вход: создаём новую table"),this.table=this.createDefaultTable(),e.n=4,this.saveTableToCloud();case 4:e.n=6;break;case 5:e.p=5,n=e.v,console.warn("Cloud load failed:",n),this.table=this.createDefaultTable();case 6:return e.a(2)}},e,this,[[1,5]])})),function(){return t.apply(this,arguments)})},{key:"createDefaultTable",value:function(){return{updateDate:Date.now(),player:{levels:[0,0,0],bonusHat:[!1,!1,!1]}}}},{key:"saveTableToCloud",value:(e=c(i().m(function e(){var t,n,r,a=arguments;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=(a.length>0&&void 0!==a[0]?a[0]:{}).flush,n=void 0!==t&&t,e.n=1,this.initYandexPlayer();case 1:return e.p=1,e.n=2,this.yandexPlayer.player.setData({},n);case 2:e.n=4;break;case 3:e.p=3,r=e.v,console.warn("Cloud save failed:",r);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return e.apply(this,arguments)})}]);var e,t,n,r}(),le=function(){return h(function e(){l(this,e),this.planeGrass={texture:null,material:null},this.model=null},[{key:"loadTextures",value:(t=c(i().m(function e(){var t,n,a,o;return i().w(function(e){for(;;)switch(e.n){case 0:return t=new C,e.n=1,Promise.all([t.loadAsync("textures/grass.jpg")]);case 1:n=e.v,a=r(n,1),o=a[0],this.planeGrass.texture=o,this.planeGrass.material=new P({map:o});case 2:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})},{key:"loadModels",value:(e=c(i().m(function e(){var t,n=this;return i().w(function(e){for(;;)switch(e.n){case 0:return t=new O,e.n=1,t.loadAsync("models/model.glb").then(function(e){var t=e.scene,r=e.animations;t.scale.x=2,t.scale.y=2,t.scale.z=2,t.position.y=0,t.rotation.y=-Math.PI/3,n.model=t,n.model.userData.mixer=new j(n.model),n.model.userData.action=n.model.userData.mixer.clipAction(r[0]),n.model.userData.action.play(),n.model.userData.clock=new D});case 1:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})}]);var e,t}(),ue=function(){return h(function e(t){var n=this;l(this,e),this.events=t.events,this.screens=document.querySelectorAll(".screen"),this.currentScreen=null,document.querySelector("body").addEventListener("click",function(e){var r=e.target.closest(".btn");if(r)switch(r.dataset.action){case"newGame":t.ui.show("free_game_screen");break;case"settings":t.ui.show("settings_screen");break;case"back":t.ui.show("main_screen");break;case"start_game_btn":t.ui.hideAll(),n.events.emit("start_match",!0)}}),this.initListeners()},[{key:"initListeners",value:function(){var e=this;this.events.on("player_auth_checked",function(t){e.updateAuthUI(t)})}},{key:"updateAuthUI",value:function(e){var t=document.querySelector(".autoriz");t&&(t.classList.toggle("hidden_screen",!0===e),!0===e?(t.setAttribute("aria-hidden","true"),t.style.display="none"):(t.setAttribute("aria-hidden","false"),t.style.display=""))}},{key:"show",value:function(e){var t=document.getElementById(e);t?(this.screens.forEach(function(e){return e.classList.remove("active")}),t.classList.add("active"),this.currentScreen=e):console.warn("Screen ".concat(e," not found"))}},{key:"hideAll",value:function(){this.screens.forEach(function(e){return e.classList.remove("active")}),this.currentScreen=null}}])}(),he=function(){return h(function e(t){l(this,e),this.scene=t.scene,this.ground=null,this.options={size:{w:10,h:10,d:.2},name:"ground"}},[{key:"loadMesh",value:function(){var e=new Y(this.options.size.w,this.options.size.h,this.options.size.d),n=new B({color:10392058,side:M});this.ground=new A(e,n),this.ground.userData=t({},this.options),this.ground.rotateX(Math.PI/2),this.ground.receiveShadow=!0}}])}(),de=function(){return h(function e(t){l(this,e),this.scene=t.scene,this.dirLight=null,this.ambientLight=null},[{key:"loadLight",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.ambientLight=new I(16777215,1),this.dirLight=new T(16777215,1),this.dirLight.position.set(-3,5,0),this.dirLight.castShadow=!0,this.dirLight.shadow.camera.far=100,e&&this.scene.add(this.ambientLight),t&&this.scene.add(this.dirLight)}}])}(),fe=function(){return h(function e(r){var a=this;l(this,e),n(this,"setEmotion",function(){var e=Object.values(a.emotions)[Math.round(Z(0,7))];e&&W.to(a.params,t(t({duration:1.2,ease:"back.out(1.7)"},e),{},{onUpdate:function(){a.updateCharacterVisuals()}}))}),this.scene=r.scene,this.characterGroup=new G,this.leftEye,this.rightEye,this.leftBrow,this.rightBrow,this.mouth,this.leftCheek,this.rightCheek,this.faceZ=.62,this.bodyMat=new P({color:9364655,roughness:.9}),this.body=new A(new R(1.5,4.2,1.2,8,.3),this.bodyMat),this.blackMat=new B({color:7556154}),this.params={bodyRotate:.3,leftEyeX:-.4,leftEyeY:1.2,leftEyeScaleX:1,leftEyeScaleY:1,rightEyeX:.4,rightEyeY:1.2,rightEyeScaleX:1,rightEyeScaleY:1,leftBrowX:-.4,leftBrowY:1.5,leftBrowRotate:0,rightBrowX:.4,rightBrowY:1.5,rightBrowRotate:0,mouthX:0,mouthY:.8,mouthScale:0,mouthRotate:Math.PI,color:"#8EE4AF"},this.emotions={angry:{leftEyeScaleY:.7,rightEyeScaleY:.7,leftBrowRotate:.5,rightBrowRotate:-.5,mouthRotate:.8*Math.PI},smirk:{leftBrowRotate:-.3,rightBrowRotate:.3,mouthRotate:.9*Math.PI,bodyRotate:.15},surprised:{leftEyeScaleY:1.3,rightEyeScaleY:1.3,leftBrowY:1.65,rightBrowY:1.65,mouthRotate:2*Math.PI,mouthScale:1.3},happy:{leftBrowY:1.6,rightBrowY:1.6,mouthScale:1,mouthRotate:1.1*Math.PI},lookLeft:{leftEyeX:-.5,rightEyeX:.3,leftEyeY:1.2,rightEyeY:1.2,leftBrowX:-.5,rightBrowX:.3,leftBrowY:1.5,rightBrowY:1.5,bodyRotate:-.3},lookRight:{leftEyeX:-.3,rightEyeX:.5,leftEyeY:1.2,rightEyeY:1.2,leftBrowX:-.3,rightBrowX:.5,leftBrowY:1.5,rightBrowY:1.5,bodyRotate:.3},lookTop:{leftEyeY:1.3,rightEyeY:1.3,leftBrowY:1.6,rightBrowY:1.6,bodyRotate:0}},setInterval(function(){a.setEmotion()},1500),setInterval(function(){a.blink()},Z(2e3,5e3))},[{key:"blink",value:function(){W.to([this.leftEye.scale,this.rightEye.scale],{duration:.1,y:.01,yoyo:!0,repeat:1,ease:"power1.inOut"})}},{key:"loadCharacters",value:function(){this.scene.add(this.characterGroup),this.body.castShadow=!0,this.body.receiveShadow=!0,this.characterGroup.add(this.body);var e=new z({color:16751001,transparent:!0,opacity:.7}),t=new V(.12,.12,.05,32);t.rotateX(Math.PI/2),this.leftEye=new A(t,this.blackMat),this.characterGroup.add(this.leftEye),this.rightEye=this.leftEye.clone(),this.characterGroup.add(this.rightEye);var n=new K(.08,.025,16,30,Math.PI/1.1);this.leftBrow=new A(n,this.blackMat),this.characterGroup.add(this.leftBrow),this.rightBrow=new A(n,this.blackMat),this.characterGroup.add(this.rightBrow);var r=new K(.08,.025,16,30,Math.PI/1);this.mouth=new A(r,this.blackMat),this.characterGroup.add(this.mouth);var a=new X(.18,32,16);a.scale(1,.6,.2),this.leftCheek=new A(a,e),this.characterGroup.add(this.leftCheek),this.rightCheek=new A(a,e),this.characterGroup.add(this.rightCheek),this.updateCharacterVisuals(),W.to(this.characterGroup.scale,{duration:2,y:"+=0.03",repeat:-1,yoyo:!0,ease:"sine.inOut"})}},{key:"updateCharacterVisuals",value:function(){this.characterGroup.rotation.y=this.params.bodyRotate,this.leftEye.position.set(this.params.leftEyeX,this.params.leftEyeY,this.faceZ),this.rightEye.position.set(this.params.rightEyeX,this.params.rightEyeY,this.faceZ),this.leftEye.scale.set(1,this.params.leftEyeScaleY,1),this.rightEye.scale.set(1,this.params.rightEyeScaleY,1),this.leftBrow.position.set(this.params.leftBrowX,this.params.leftBrowY,this.faceZ),this.rightBrow.position.set(this.params.rightBrowX,this.params.rightBrowY,this.faceZ),this.leftBrow.rotation.z=this.params.leftBrowRotate,this.rightBrow.rotation.z=this.params.rightBrowRotate,this.mouth.position.set(this.params.mouthX,this.params.mouthY,this.faceZ),this.mouth.rotation.z=this.params.mouthRotate,this.leftCheek.position.set(-.5,.9,this.faceZ),this.rightCheek.position.set(.5,.9,this.faceZ),this.body.material.color.set(this.params.color)}}])}(),pe=function(){return h(function e(t){l(this,e),this.scene=t.scene,this.countInst1=3,this.instancesObjs={instances1:{data:Array.from({length:this.countInst1},function(e,t){return{position:new u(0,.2,0),rotation:new U(0,0,0),scale:new u(1,1,1),size:new u(.2,.2,.2),userData:{name:"inst1",collide:null,body:null,speed:null,direction:1}}}),geometryInst1:new X(.2),materialInst1:new P({color:52224}),inst1:null}},this.instancesObjs.instances1.inst1=new F(this.instancesObjs.instances1.geometryInst1,this.instancesObjs.instances1.materialInst1,this.countInst1),this.instancesObjs.instances1.inst1.instanceMatrix.setUsage(N),this.instancesObjs.instances1.inst1.receiveShadow=!0,this.instancesObjs.instances1.inst1.castShadow=!0,this.instancesObjs.instances1.inst1.frustumCulled=!1},[{key:"init",value:function(){for(var e=0;e<this.countInst1;e++)this.instancesObjs.instances1.data[e].position.x=Z(-3,3),this.instancesObjs.instances1.data[e].position.z=Z(-3,3),this.instancesObjs.instances1.data[e].position.y=Z(1,2);this.instancesObjs.instances1.inst1.instanceMatrix.needsUpdate=!0}},{key:"toVec3",value:function(e){var t,n,r;return"number"==typeof e?new u(e,e,e):null!=e&&e.isVector3?e:e?new u(null!==(t=e.x)&&void 0!==t?t:1,null!==(n=e.y)&&void 0!==n?n:1,null!==(r=e.z)&&void 0!==r?r:1):new u(1,1,1)}}])}();console.clear();var me={};function ye(){return(ye=c(i().m(function e(t){var n;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ge();case 1:e.n=3;break;case 2:e.p=2,n=e.v,window.showInitError?window.showInitError(n):console.error("Init error",n);case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function ge(){return ve.apply(this,arguments)}function ve(){return(ve=c(i().m(function e(){var t;return i().w(function(e){for(;;)switch(e.n){case 0:return(t=document.querySelector(".loader_line"))&&(t.style.width="30%"),e.n=1,xe();case 1:return e.n=2,_e();case 2:t&&(t.style.width="100%"),me.paramsClass.gameInit=!0,me.ui.show("main_screen"),me.events.on("start_match",function(){return we()}),we(),Le();case 3:return e.a(2)}},e)}))).apply(this,arguments)}function we(){return be.apply(this,arguments)}function be(){return(be=c(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:me.ui.hideAll(),me.gameClass.loadMesh(),me.instancesClass.init(),me.worldClass.loadLight(!0,!0),me.paramsClass.startGame();case 1:return e.a(2)}},e)}))).apply(this,arguments)}function xe(){return ke.apply(this,arguments)}function ke(){return(ke=c(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:me.initClass=new ee(me),me.events=new Q,me.scene=me.initClass.scene,me.camera=me.initClass.camera,me.renderer=me.initClass.renderer,me.ui=new ue(me),me.paramsClass=new te(me),me.assetsManager=new le(me),me.audioClass=new ne(me),me.dataClass=new ce(me),me.controlClass=new re(me),me.gameClass=new he(me),me.worldClass=new de(me),me.instancesClass=new pe(me),me.charactersClass=new fe(me);case 1:return e.a(2)}},e)}))).apply(this,arguments)}function _e(){return Ee.apply(this,arguments)}function Ee(){return(Ee=c(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,$();case 1:return me.paramsClass.initCustomScroll(),se("ru"),e.n=2,me.assetsManager.loadTextures();case 2:return e.n=3,me.charactersClass.loadCharacters();case 3:return e.n=4,me.audioClass.loadAudio();case 4:return e.n=5,me.controlClass.addKeyListeners();case 5:"localhost"===location.hostname&&(new H).addFolder("Physics");case 6:return e.a(2)}},e)}))).apply(this,arguments)}function Se(e){me.paramsClass&&(me.paramsClass.currentGameState,me.paramsClass.gameState.play)}function Le(){var e=0,t=1/60;me.renderer.setAnimationLoop(function(){var n=me.clock.getDelta();n>.1&&(n=.1),e+=n;for(var r=5;e>=t&&r>0;)Se(),e-=t,r--;e>t&&(e=0),me.initClass&&me.initClass.stats&&me.initClass.stats.update(),me.renderer&&me.scene&&me.camera&&me.renderer.render(me.scene,me.camera)})}me.clock=new D;var Ce=new q(function(e){return ye.apply(this,arguments)});Ce.init()}}})}();
